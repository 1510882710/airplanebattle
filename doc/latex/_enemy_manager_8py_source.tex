\doxysection{Enemy\+Manager.\+py}
\hypertarget{_enemy_manager_8py_source}{}\label{_enemy_manager_8py_source}\mbox{\hyperlink{_enemy_manager_8py}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00001}\mbox{\hyperlink{namespace_enemy_manager}{00001}}\ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00002}00002\ \textcolor{stringliteral}{ENEMYMANAGER\ 类负责组织多个敌机的行为，}}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00003}00003\ \textcolor{stringliteral}{\ \ \ \ 例如：何时、从那个位置进入游戏场景，}}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00004}00004\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ 以及什么时候发射子弹等。}}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00005}00005\ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00006}00006\ \textcolor{keyword}{import}\ pygame}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00007}00007\ \textcolor{keyword}{import}\ random}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00008}00008\ \textcolor{keyword}{from}\ Bullet\ \textcolor{keyword}{import}\ Bullet}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00009}00009\ \textcolor{keyword}{from}\ config1\ \textcolor{keyword}{import}\ *}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00010}00010\ \textcolor{keyword}{from}\ EnemyPlane\ \textcolor{keyword}{import}\ *}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00011}00011\ }
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00012}\mbox{\hyperlink{class_enemy_manager_1_1_enemy_manager}{00012}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_enemy_manager_1_1_enemy_manager}{EnemyManager}}:}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00013}00013\ }
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00014}\mbox{\hyperlink{class_enemy_manager_1_1_enemy_manager_a6d8019f2be3731a8cf64fd1a04cafd9f}{00014}}\ \ \ \ \ ENEMY\_START\_EVENT\ =\ pygame.USEREVENT\ +\ 1}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00015}\mbox{\hyperlink{class_enemy_manager_1_1_enemy_manager_abedf84d5a4db55355b7b43c2ea0f0d56}{00015}}\ \ \ \ \ ENEMY\_SHOOT\_EVENT\ =\ pygame.USEREVENT\ +\ 2}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00016}00016\ }
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00017}\mbox{\hyperlink{class_enemy_manager_1_1_enemy_manager_ac84f2d6977630116cda0202c081400e1}{00017}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{class_enemy_manager_1_1_enemy_manager_ac84f2d6977630116cda0202c081400e1}{\_\_init\_\_}}(self,\ scene):}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00018}00018\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ 初始化敌机}}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00019}\mbox{\hyperlink{class_enemy_manager_1_1_enemy_manager_a098c8906aec5ae13d0a0d0f2888e5e91}{00019}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{class_enemy_manager_1_1_enemy_manager_a098c8906aec5ae13d0a0d0f2888e5e91}{enemies}}\ =\ [\mbox{\hyperlink{class_enemy_plane_1_1_enemy_plane}{EnemyPlane}}(scene)\ \textcolor{keywordflow}{for}\ \_\ \textcolor{keywordflow}{in}\ range(8)]}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00020}00020\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ 定时器事件}}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00021}00021\ \ \ \ \ \ \ \ \ pygame.time.set\_timer(EnemyManager.ENEMY\_START\_EVENT,\ 2000)}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00022}00022\ \ \ \ \ \ \ \ \ pygame.time.set\_timer(EnemyManager.ENEMY\_SHOOT\_EVENT,\ 1000)}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00023}00023\ }
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00024}\mbox{\hyperlink{class_enemy_manager_1_1_enemy_manager_a28f9fd0e97645377f6e1131e0d8bcca7}{00024}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{class_enemy_manager_1_1_enemy_manager_a28f9fd0e97645377f6e1131e0d8bcca7}{calc\_position}}(self):}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00025}00025\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ enemy\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{class_enemy_manager_1_1_enemy_manager_a098c8906aec5ae13d0a0d0f2888e5e91}{enemies}}:}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00026}00026\ \ \ \ \ \ \ \ \ \ \ \ \ enemy.calc\_position()}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00027}00027\ }
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00028}\mbox{\hyperlink{class_enemy_manager_1_1_enemy_manager_a4c49a5b026421e42500a0bf913e99314}{00028}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{class_enemy_manager_1_1_enemy_manager_a4c49a5b026421e42500a0bf913e99314}{draw\_element}}(self):}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00029}00029\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ enemy\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{class_enemy_manager_1_1_enemy_manager_a098c8906aec5ae13d0a0d0f2888e5e91}{enemies}}:}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00030}00030\ \ \ \ \ \ \ \ \ \ \ \ \ enemy.draw\_element()}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00031}00031\ }
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00032}\mbox{\hyperlink{class_enemy_manager_1_1_enemy_manager_af09a28e99b405bf486f2a196fb498059}{00032}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{class_enemy_manager_1_1_enemy_manager_af09a28e99b405bf486f2a196fb498059}{set\_out}}(self):}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00033}00033\ }
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00034}00034\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ 随机选择\ 1-\/\ 4\ 个飞机}}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00035}00035\ \ \ \ \ \ \ \ \ number\ =\ random.randint(1,\ 4)}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00036}00036\ }
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00037}00037\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ 候选敌机}}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00038}00038\ \ \ \ \ \ \ \ \ wait\_for\_out\ =\ []}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00039}00039\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ enemy\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{class_enemy_manager_1_1_enemy_manager_a098c8906aec5ae13d0a0d0f2888e5e91}{enemies}}:}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00040}00040\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ enemy.visible:}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00041}00041\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ wait\_for\_out.append(enemy)}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00042}00042\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ len(wait\_for\_out)\ ==\ number:}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00043}00043\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break}}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00044}00044\ }
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00045}00045\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ 敌机出发}}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00046}00046\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ len(wait\_for\_out)\ ==\ number:}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00047}00047\ }
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00048}00048\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ 敌机位置}}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00049}00049\ \ \ \ \ \ \ \ \ \ \ \ \ position\_xs\ =\ []}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00050}00050\ \ \ \ \ \ \ \ \ \ \ \ \ range\_distance\ =\ int((SCENE\_W\ -\/\ 100)\ /\ number)}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00051}00051\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ index\ \textcolor{keywordflow}{in}\ range(number):}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00052}00052\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ x\ =\ random.randint(index\ *\ range\_distance,\ index\ *\ range\_distance\ +\ range\_distance\ -\/\ 100)}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00053}00053\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ position\_xs.append(x)}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00054}00054\ }
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00055}00055\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ 敌机出发}}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00056}00056\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ enemy,\ x\ \textcolor{keywordflow}{in}\ zip(wait\_for\_out,\ position\_xs):}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00057}00057\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ enemy.set\_used(x,\ -\/enemy.bbox[3])}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00058}00058\ }
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00059}\mbox{\hyperlink{class_enemy_manager_1_1_enemy_manager_ac2843d26acca2241c8de0eee7f095caf}{00059}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{class_enemy_manager_1_1_enemy_manager_ac2843d26acca2241c8de0eee7f095caf}{shoot}}(self):}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00060}00060\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ enemy\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{class_enemy_manager_1_1_enemy_manager_a098c8906aec5ae13d0a0d0f2888e5e91}{enemies}}:}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00061}00061\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ enemy.visible:}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00062}00062\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue}}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00063}00063\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ random.randint(1,\ 100)\ >\ 50\ \textcolor{keywordflow}{and}\ enemy.bbox[1]\ <\ 500:}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00064}00064\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ enemy.shoot()}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00065}00065\ }
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00066}00066\ \textcolor{keywordflow}{if}\ \_\_name\_\_\ ==\ \textcolor{stringliteral}{'\_\_main\_\_'}:}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00067}00067\ }
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00068}00068\ \ \ \ \ pygame.init()}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00069}\mbox{\hyperlink{namespace_enemy_manager_a8640ced6e891870390cc260b8abf66ca}{00069}}\ \ \ \ \ window\ =\ pygame.display.set\_mode([512,\ 768])}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00070}\mbox{\hyperlink{namespace_enemy_manager_a7f297c867715a1672f554d3043afd16c}{00070}}\ \ \ \ \ clock\ =\ pygame.time.Clock()}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00071}00071\ }
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00072}00072\ \ \ \ \ \textcolor{comment}{\#\ 初始化敌机管理器}}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00073}\mbox{\hyperlink{namespace_enemy_manager_a8c4f87ac82dae855f9b6cbbb56f1ebf9}{00073}}\ \ \ \ \ enemy\ =\ \mbox{\hyperlink{class_enemy_manager_1_1_enemy_manager}{EnemyManager}}(window)}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00074}00074\ }
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00075}00075\ \ \ \ \ \textcolor{keywordflow}{while}\ \textcolor{keyword}{True}:}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00076}00076\ }
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00077}00077\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ 清空窗口}}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00078}00078\ \ \ \ \ \ \ \ \ window.fill((0,\ 0,\ 0))}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00079}00079\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ 敌机位置}}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00080}00080\ \ \ \ \ \ \ \ \ enemy.calc\_position()}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00081}00081\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ 绘制敌机}}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00082}00082\ \ \ \ \ \ \ \ \ enemy.draw\_element()}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00083}00083\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ 处理定时器事件}}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00084}\mbox{\hyperlink{namespace_enemy_manager_ae4ef7f4dec0311caf9087af77d2c2858}{00084}}\ \ \ \ \ \ \ \ \ events\ =\ pygame.event.get()}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00085}00085\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ event\ \textcolor{keywordflow}{in}\ events:}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00086}00086\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ event.type\ ==\ EnemyManager.ENEMY\_START\_EVENT:}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00087}00087\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ enemy.set\_out()}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00088}00088\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ event.type\ ==\ EnemyManager.ENEMY\_SHOOT\_EVENT:}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00089}00089\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ enemy.shoot()}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00090}00090\ }
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00091}00091\ \ \ \ \ \ \ \ \ pygame.display.update()}
\DoxyCodeLine{\Hypertarget{_enemy_manager_8py_source_l00092}00092\ \ \ \ \ \ \ \ \ clock.tick(60)}

\end{DoxyCode}
